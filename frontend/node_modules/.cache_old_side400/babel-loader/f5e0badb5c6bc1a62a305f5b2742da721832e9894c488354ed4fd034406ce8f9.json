{"ast":null,"code":"import{useState,useEffect,useRef}from\"react\";import QuestionInput from\"./components/QuestionInput\";import{askAI}from\"./api/askAI\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentResponse,setCurrentResponse]=useState(null);const[isLoading,setIsLoading]=useState(false);const[view,setView]=useState('shop');const[showComingUp,setShowComingUp]=useState(false);const[cupMessage,setCupMessage]=useState(\"\");const[lastQuestion,setLastQuestion]=useState(\"\");const[lastResponse,setLastResponse]=useState(null);const[isMobile,setIsMobile]=useState(window.innerWidth<768);const videoRef=useRef(null);useEffect(()=>{const handleResize=()=>setIsMobile(window.innerWidth<768);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);useEffect(()=>{if(videoRef.current){// Force play state for mobile compatibility\nvideoRef.current.muted=true;videoRef.current.playsInline=true;const playPromise=videoRef.current.play();if(playPromise!==undefined){playPromise.catch(()=>{// Autoplay was prevented\n});}}},[view]);const CUP_CLOSERS=[\"That pretty much sums me up ‚òï‚ú®\",\"Just a girl who loves clean code & good coffee üíï\",\"Backend girlie with a soft spot for React ‚òï\",\"And yeah‚Ä¶ I really love what I do ‚ú®\",\"I am, in fact, just a girl üë©üèΩ‚Äçüíª‚òï\",\"Hope that's exactly what you ordered! üíï\",\"Flavorful code and perfect lattes. ‚ú®\"];const getRandomCupMessage=()=>CUP_CLOSERS[Math.floor(Math.random()*CUP_CLOSERS.length)];const menuItems=[{id:\"about\",name:\"Origin Roast (Americano)\",sub:\"My story & background\"},{id:\"skills\",name:\"Java Script Injection (Espresso)\",sub:\"Technical expertise & stacks\"},{id:\"projects\",name:\"Full-Stack Filter (Cold Brew)\",sub:\"Portfolio & featured projects\"},{id:\"experience\",name:\"Legacy Blend (Macchiato)\",sub:\"Professional work history\"},{id:\"education\",name:\"Academic Steam (Flat White)\",sub:\"Education & certifications\"},{id:\"contact\",name:\"Matcha Networking\",sub:\"Get in touch\"}];// MENU ITEM CLICK\nconst handleMenuSelect=async menuItem=>{setIsLoading(true);setShowComingUp(true);try{const response=await askAI(\"menu\",menuItem);setCupMessage(getRandomCupMessage());// Show \"Coming right up!\" for 1 second\nsetTimeout(()=>{setShowComingUp(false);setCurrentResponse(response);setView('coffee');// Zoom to coffee\n},1000);}catch(error){console.error(\"Error fetching AI response:\",error);setShowComingUp(false);setCurrentResponse(\"Oops! The barista is on break. Try again later! ‚òï\");setView('coffee');}finally{setIsLoading(false);}};// QUESTION SUBMIT\nconst handleQuestionSubmit=async question=>{setIsLoading(true);setLastQuestion(question);setLastResponse(null);// Reset response for new animation\nsetView('chat');// Switch to chat view immediately\ntry{const response=await askAI(\"question\",question);// Delay response by 500ms\nsetTimeout(()=>{setLastResponse(response);},500);}catch(error){console.error(\"Error fetching AI response:\",error);setTimeout(()=>{setLastResponse(\"Oops! The barista is on break. Try again later! ‚òï\");},500);}finally{setIsLoading(false);}};const handleBackToShop=()=>{setView('shop');setCurrentResponse(null);setLastQuestion(\"\");setLastResponse(null);};// SHOP VIEW\nif(view==='shop'){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row h-screen w-full overflow-hidden bg-[#fdfaf7]\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"w-full md:w-[360px] h-auto md:h-full bg-[#4a322d] p-6 md:p-8 flex flex-col shadow-2xl z-20 overflow-y-auto md:overflow-hidden scrollbar-hide max-h-[40vh] md:max-h-none border-b-2 md:border-b-0 md:border-r-2 border-white/5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 md:mb-8 pb-4 md:pb-6 border-b border-white/10 text-center\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-[#fffcf0] text-xl md:text-2xl leading-tight font-bold tracking-tight whitespace-nowrap\",children:\"Bean There, Built That\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-3 md:gap-4\",children:menuItems.map(item=>/*#__PURE__*/_jsxs(\"button\",{className:\"group w-full bg-[#fffcf0] p-4 md:p-5 rounded-xl text-left transition-all md:hover:translate-x-0 hover:translate-x-2 shadow-lg border-l-4 border-[#4a322d] disabled:opacity-50\",onClick:()=>handleMenuSelect(item.id),disabled:isLoading,children:[/*#__PURE__*/_jsx(\"span\",{className:\"block font-bold text-[#2b1d1a] text-lg md:text-xl mb-0.5 md:mb-1\",children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"block font-medium text-[#5d4037] text-xs md:text-sm italic opacity-90 leading-relaxed menu-item-sub\",children:item.sub})]},item.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 md:mt-auto pt-4 md:pt-8 text-[#fffcf0]/80 text-xs md:text-sm font-bold italic text-center tracking-wide\",children:\"Freshly brewed responses \\u2615\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"relative flex-1 h-full shadow-inner overflow-hidden\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"absolute inset-0 w-full h-full object-cover\",style:{objectPosition:isMobile?'30% center':'center right'},autoPlay:true,loop:true,muted:true,playsInline:true,preload:\"auto\",controls:false,children:/*#__PURE__*/_jsx(\"source\",{src:\"/barista.mp4\",type:\"video/mp4\"})},\"barista-video\"),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-6 md:top-12 right-6 md:right-12 left-1/2 -translate-x-1/2 md:left-auto md:translate-x-0 z-20 w-max max-w-[90vw]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"backdrop-blur-xl bg-black/40 px-6 md:px-16 py-3 md:py-8 rounded-full border border-white/20 shadow-2xl\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-white text-xl md:text-5xl font-bold tracking-tight whitespace-nowrap text-center\",style:{textShadow:'0 4px 12px rgba(0,0,0,0.3)'},children:\"Latte Me Show You \\u2615\"})})}),showComingUp&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/3 left-1/2 md:left-auto md:right-1/4 transform -translate-x-1/2 md:translate-x-0 animate-bounce z-30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl px-8 md:px-12 py-4 md:py-6 shadow-2xl border border-amber-50 relative\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[#3e2723] font-bold text-lg md:text-2xl whitespace-nowrap\",children:\"Coming right up! \\u2615\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-white\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-6 md:bottom-8 left-1/2 transform -translate-x-1/2 w-full max-w-2xl px-4 z-40\",children:/*#__PURE__*/_jsx(QuestionInput,{onSubmit:handleQuestionSubmit,isLoading:isLoading})})]})]});}/**\n   * Character-Aware Receipt Summary ‚Äî Snaps to the nearest full stop or punctuation\n   */const summarizeForReceipt=function(text){let maxChars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:420;if(!text)return\"\";if(text.length<=maxChars)return text;const truncated=text.slice(0,maxChars);const lastPunctuation=Math.max(truncated.lastIndexOf(\".\"),truncated.lastIndexOf(\"!\"),truncated.lastIndexOf(\"?\"));if(lastPunctuation===-1){return truncated.trim()+\".\";}return truncated.slice(0,lastPunctuation+1).trim();};// CHAT VIEW\nif(view==='chat'){return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-full relative flex flex-col items-center justify-center overflow-hidden bg-[#2b1d1a]\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"absolute inset-0 w-full h-full object-cover\",autoPlay:true,loop:true,muted:true,playsInline:true,preload:\"auto\",controls:false,onTimeUpdate:e=>{const video=e.currentTarget;if(video.currentTime>=4){video.currentTime=0;}},children:/*#__PURE__*/_jsx(\"source\",{src:\"/barista-chat.mp4\",type:\"video/mp4\"})},\"chat-video\"),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-20 w-full max-w-4xl px-4 md:px-10 flex flex-col h-full py-20 pointer-events-none\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col gap-6 justify-end pb-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bubble-user ml-auto pointer-events-auto shadow-2xl\",children:lastQuestion}),lastResponse&&/*#__PURE__*/_jsx(\"div\",{className:\"bubble-barista mr-auto pointer-events-auto shadow-2xl\",children:lastResponse})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto pointer-events-auto pb-10\",children:/*#__PURE__*/_jsx(QuestionInput,{onSubmit:handleQuestionSubmit,isLoading:isLoading})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToShop,className:\"fixed top-6 right-6 z-50 bg-[#fffcf0] text-[#3e2723] px-8 py-3 rounded-full font-bold shadow-2xl hover:scale-105 active:scale-95 transition-all text-xl\",children:\"\\u2190 Order something else\"})]});}// COFFEE/RECEIPT VIEW\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-full relative flex flex-col md:items-center md:justify-center overflow-y-auto overflow-x-hidden md:overflow-hidden scrollbar-hide bg-[#2b1d1a]\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"absolute inset-0 w-full h-full object-cover opacity-60 md:opacity-100\",autoPlay:true,loop:true,muted:true,playsInline:true,preload:\"auto\",controls:false,children:/*#__PURE__*/_jsx(\"source\",{src:\"/coffee-cup.mp4\",type:\"video/mp4\"})},\"coffee-video\"),/*#__PURE__*/_jsxs(\"div\",{className:\"relative md:absolute md:left-16 md:top-[10%] z-30 w-[90%] max-w-[400px] mt-24 md:mt-0 mx-auto md:mx-0 p-8 md:p-10 receipt text-[#3e2723] scale-100 md:scale-115 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-dashed border-[#3e2723]/30 pb-4 md:pb-6 mb-4 md:mb-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-bold tracking-widest text-base md:text-lg uppercase text-[#3e2723]\",children:\"Coffee Receipt\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs md:text-sm opacity-60 mt-1\",children:[new Date().toLocaleTimeString(),\" - Order #88\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl md:text-2xl leading-relaxed italic font-medium overflow-hidden text-[#3e2723]\",style:{maxHeight:\"320px\",display:\"-webkit-box\",WebkitLineClamp:8,WebkitBoxOrient:\"vertical\"},children:summarizeForReceipt(currentResponse)}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 md:mt-12 pt-6 border-t border-dashed border-[#3e2723]/30 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm md:text-base opacity-50 uppercase tracking-tighter\",children:\"Thank You for Visiting! \\u2615\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBackToShop,className:\"fixed md:absolute top-6 md:top-10 left-6 md:left-auto md:right-10 z-50 bg-[#4a322d] text-[#fffcf0]  px-8 md:px-14 py-4 md:py-6 rounded-full text-xl md:text-2xl font-bold shadow-2xl hover:scale-105 transition-all active:scale-95 border-2 border-white/20\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u2190 Order something else\"})})]});}export default App;","map":{"version":3,"names":["useState","useEffect","useRef","QuestionInput","askAI","jsx","_jsx","jsxs","_jsxs","App","currentResponse","setCurrentResponse","isLoading","setIsLoading","view","setView","showComingUp","setShowComingUp","cupMessage","setCupMessage","lastQuestion","setLastQuestion","lastResponse","setLastResponse","isMobile","setIsMobile","window","innerWidth","videoRef","handleResize","addEventListener","removeEventListener","current","muted","playsInline","playPromise","play","undefined","catch","CUP_CLOSERS","getRandomCupMessage","Math","floor","random","length","menuItems","id","name","sub","handleMenuSelect","menuItem","response","setTimeout","error","console","handleQuestionSubmit","question","handleBackToShop","className","children","map","item","onClick","disabled","ref","style","objectPosition","autoPlay","loop","preload","controls","src","type","textShadow","onSubmit","summarizeForReceipt","text","maxChars","arguments","truncated","slice","lastPunctuation","max","lastIndexOf","trim","onTimeUpdate","e","video","currentTarget","currentTime","Date","toLocaleTimeString","maxHeight","display","WebkitLineClamp","WebkitBoxOrient"],"sources":["/Users/mukukahnkambagmail.com/Desktop/latte-ai-portfolio/frontend/src/App.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport QuestionInput from \"./components/QuestionInput\";\nimport { askAI } from \"./api/askAI\";\nimport \"./App.css\";\n\ntype View = 'shop' | 'coffee' | 'chat';\n\nfunction App() {\n  const [currentResponse, setCurrentResponse] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [view, setView] = useState<View>('shop');\n  const [showComingUp, setShowComingUp] = useState(false);\n  const [cupMessage, setCupMessage] = useState<string>(\"\");\n  const [lastQuestion, setLastQuestion] = useState<string>(\"\");\n  const [lastResponse, setLastResponse] = useState<string | null>(null);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth < 768);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    if (videoRef.current) {\n      // Force play state for mobile compatibility\n      videoRef.current.muted = true;\n      videoRef.current.playsInline = true;\n      const playPromise = videoRef.current.play();\n      if (playPromise !== undefined) {\n        playPromise.catch(() => {\n          // Autoplay was prevented\n        });\n      }\n    }\n  }, [view]);\n\n  const CUP_CLOSERS = [\n    \"That pretty much sums me up ‚òï‚ú®\",\n    \"Just a girl who loves clean code & good coffee üíï\",\n    \"Backend girlie with a soft spot for React ‚òï\",\n    \"And yeah‚Ä¶ I really love what I do ‚ú®\",\n    \"I am, in fact, just a girl üë©üèΩ‚Äçüíª‚òï\",\n    \"Hope that's exactly what you ordered! üíï\",\n    \"Flavorful code and perfect lattes. ‚ú®\"\n  ];\n\n  const getRandomCupMessage = () => CUP_CLOSERS[Math.floor(Math.random() * CUP_CLOSERS.length)];\n\n  const menuItems = [\n    { id: \"about\", name: \"Origin Roast (Americano)\", sub: \"My story & background\" },\n    { id: \"skills\", name: \"Java Script Injection (Espresso)\", sub: \"Technical expertise & stacks\" },\n    { id: \"projects\", name: \"Full-Stack Filter (Cold Brew)\", sub: \"Portfolio & featured projects\" },\n    { id: \"experience\", name: \"Legacy Blend (Macchiato)\", sub: \"Professional work history\" },\n    { id: \"education\", name: \"Academic Steam (Flat White)\", sub: \"Education & certifications\" },\n    { id: \"contact\", name: \"Matcha Networking\", sub: \"Get in touch\" },\n  ];\n\n  // MENU ITEM CLICK\n  const handleMenuSelect = async (menuItem: string) => {\n    setIsLoading(true);\n    setShowComingUp(true);\n\n    try {\n      const response = await askAI(\"menu\", menuItem);\n      setCupMessage(getRandomCupMessage());\n\n      // Show \"Coming right up!\" for 1 second\n      setTimeout(() => {\n        setShowComingUp(false);\n        setCurrentResponse(response);\n        setView('coffee'); // Zoom to coffee\n      }, 1000);\n    } catch (error) {\n      console.error(\"Error fetching AI response:\", error);\n      setShowComingUp(false);\n      setCurrentResponse(\"Oops! The barista is on break. Try again later! ‚òï\");\n      setView('coffee');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // QUESTION SUBMIT\n  const handleQuestionSubmit = async (question: string) => {\n    setIsLoading(true);\n    setLastQuestion(question);\n    setLastResponse(null); // Reset response for new animation\n    setView('chat'); // Switch to chat view immediately\n\n    try {\n      const response = await askAI(\"question\", question);\n\n      // Delay response by 500ms\n      setTimeout(() => {\n        setLastResponse(response);\n      }, 500);\n    } catch (error) {\n      console.error(\"Error fetching AI response:\", error);\n      setTimeout(() => {\n        setLastResponse(\"Oops! The barista is on break. Try again later! ‚òï\");\n      }, 500);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleBackToShop = () => {\n    setView('shop');\n    setCurrentResponse(null);\n    setLastQuestion(\"\");\n    setLastResponse(null);\n  };\n\n  // SHOP VIEW\n  if (view === 'shop') {\n    return (\n      <div className=\"flex flex-col md:flex-row h-screen w-full overflow-hidden bg-[#fdfaf7]\">\n        {/* LEFT SIDEBAR: FULL HEIGHT MENU (Stacks at Top on Mobile) */}\n        <aside className=\"w-full md:w-[360px] h-auto md:h-full bg-[#4a322d] p-6 md:p-8 flex flex-col shadow-2xl z-20 overflow-y-auto md:overflow-hidden scrollbar-hide max-h-[40vh] md:max-h-none border-b-2 md:border-b-0 md:border-r-2 border-white/5\">\n          {/* ORGANIZED HEADING */}\n          <div className=\"mb-6 md:mb-8 pb-4 md:pb-6 border-b border-white/10 text-center\">\n            <h2 className=\"text-[#fffcf0] text-xl md:text-2xl leading-tight font-bold tracking-tight whitespace-nowrap\">\n              Bean There, Built That\n            </h2>\n          </div>\n\n          {/* ORGANIZED MENU ITEMS */}\n          <div className=\"flex flex-col gap-3 md:gap-4\">\n            {menuItems.map((item) => (\n              <button\n                key={item.id}\n                className=\"group w-full bg-[#fffcf0] p-4 md:p-5 rounded-xl text-left transition-all md:hover:translate-x-0 hover:translate-x-2 shadow-lg border-l-4 border-[#4a322d] disabled:opacity-50\"\n                onClick={() => handleMenuSelect(item.id)}\n                disabled={isLoading}\n              >\n                <span className=\"block font-bold text-[#2b1d1a] text-lg md:text-xl mb-0.5 md:mb-1\">\n                  {item.name}\n                </span>\n                <span className=\"block font-medium text-[#5d4037] text-xs md:text-sm italic opacity-90 leading-relaxed menu-item-sub\">\n                  {item.sub}\n                </span>\n              </button>\n            ))}\n          </div>\n\n          <div className=\"mt-8 md:mt-auto pt-4 md:pt-8 text-[#fffcf0]/80 text-xs md:text-sm font-bold italic text-center tracking-wide\">\n            Freshly brewed responses ‚òï\n          </div>\n        </aside>\n\n        {/* MAIN AREA: BARISTA VIDEO (Agent) */}\n        <main className=\"relative flex-1 h-full shadow-inner overflow-hidden\">\n          <video\n            ref={videoRef}\n            key=\"barista-video\"\n            className=\"absolute inset-0 w-full h-full object-cover\"\n            style={{ objectPosition: isMobile ? '30% center' : 'center right' }}\n            autoPlay\n            loop\n            muted\n            playsInline\n            preload=\"auto\"\n            controls={false}\n          >\n            <source src=\"/barista.mp4\" type=\"video/mp4\" />\n          </video>\n\n          {/* THE CLASSY MODERN HEADER (Positioned Relatively on Mobile) */}\n          <div className=\"absolute top-6 md:top-12 right-6 md:right-12 left-1/2 -translate-x-1/2 md:left-auto md:translate-x-0 z-20 w-max max-w-[90vw]\">\n            <div className=\"backdrop-blur-xl bg-black/40 px-6 md:px-16 py-3 md:py-8 rounded-full border border-white/20 shadow-2xl\">\n              <h1 className=\"text-white text-xl md:text-5xl font-bold tracking-tight whitespace-nowrap text-center\" style={{\n                textShadow: '0 4px 12px rgba(0,0,0,0.3)'\n              }}>\n                Latte Me Show You ‚òï\n              </h1>\n            </div>\n          </div>\n\n          {/* BUBBLE CHAT: \"Coming right up!\" */}\n          {showComingUp && (\n            <div className=\"absolute top-1/3 left-1/2 md:left-auto md:right-1/4 transform -translate-x-1/2 md:translate-x-0 animate-bounce z-30\">\n              <div className=\"bg-white rounded-3xl px-8 md:px-12 py-4 md:py-6 shadow-2xl border border-amber-50 relative\">\n                <p className=\"text-[#3e2723] font-bold text-lg md:text-2xl whitespace-nowrap\">\n                  Coming right up! ‚òï\n                </p>\n                {/* Speech bubble tail */}\n                <div className=\"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-white\"></div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"absolute bottom-6 md:bottom-8 left-1/2 transform -translate-x-1/2 w-full max-w-2xl px-4 z-40\">\n            <QuestionInput onSubmit={handleQuestionSubmit} isLoading={isLoading} />\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  /**\n   * Character-Aware Receipt Summary ‚Äî Snaps to the nearest full stop or punctuation\n   */\n  const summarizeForReceipt = (text: string | null, maxChars = 420) => {\n    if (!text) return \"\";\n    if (text.length <= maxChars) return text;\n\n    const truncated = text.slice(0, maxChars);\n    const lastPunctuation = Math.max(\n      truncated.lastIndexOf(\".\"),\n      truncated.lastIndexOf(\"!\"),\n      truncated.lastIndexOf(\"?\")\n    );\n\n    if (lastPunctuation === -1) {\n      return truncated.trim() + \".\";\n    }\n\n    return truncated.slice(0, lastPunctuation + 1).trim();\n  };\n\n  // CHAT VIEW\n  if (view === 'chat') {\n    return (\n      <div className=\"h-screen w-full relative flex flex-col items-center justify-center overflow-hidden bg-[#2b1d1a]\">\n        <video\n          ref={videoRef}\n          key=\"chat-video\"\n          className=\"absolute inset-0 w-full h-full object-cover\"\n          autoPlay\n          loop\n          muted\n          playsInline\n          preload=\"auto\"\n          controls={false}\n          onTimeUpdate={(e) => {\n            const video = e.currentTarget;\n            if (video.currentTime >= 4) {\n              video.currentTime = 0;\n            }\n          }}\n        >\n          <source src=\"/barista-chat.mp4\" type=\"video/mp4\" />\n        </video>\n\n        {/* CHAT INTERFACE */}\n        <div className=\"relative z-20 w-full max-w-4xl px-4 md:px-10 flex flex-col h-full py-20 pointer-events-none\">\n          <div className=\"flex-1 flex flex-col gap-6 justify-end pb-12\">\n            {/* USER BUBBLE */}\n            <div className=\"bubble-user ml-auto pointer-events-auto shadow-2xl\">\n              {lastQuestion}\n            </div>\n\n            {/* BARISTA BUBBLE */}\n            {lastResponse && (\n              <div className=\"bubble-barista mr-auto pointer-events-auto shadow-2xl\">\n                {lastResponse}\n              </div>\n            )}\n          </div>\n\n          {/* FOLLOW UP INPUT */}\n          <div className=\"mt-auto pointer-events-auto pb-10\">\n            <QuestionInput onSubmit={handleQuestionSubmit} isLoading={isLoading} />\n          </div>\n        </div>\n\n        {/* BACK BUTTON */}\n        <button\n          onClick={handleBackToShop}\n          className=\"fixed top-6 right-6 z-50 bg-[#fffcf0] text-[#3e2723] px-8 py-3 rounded-full font-bold shadow-2xl hover:scale-105 active:scale-95 transition-all text-xl\"\n        >\n          ‚Üê Order something else\n        </button>\n      </div>\n    );\n  }\n\n  // COFFEE/RECEIPT VIEW\n  return (\n    <div className=\"h-screen w-full relative flex flex-col md:items-center md:justify-center overflow-y-auto overflow-x-hidden md:overflow-hidden scrollbar-hide bg-[#2b1d1a]\">\n      {/* VIDEO BACKGROUND */}\n      <video\n        ref={videoRef}\n        key=\"coffee-video\"\n        className=\"absolute inset-0 w-full h-full object-cover opacity-60 md:opacity-100\"\n        autoPlay\n        loop\n        muted\n        playsInline\n        preload=\"auto\"\n        controls={false}\n      >\n        <source src=\"/coffee-cup.mp4\" type=\"video/mp4\" />\n      </video>\n\n      {/* THE RECEIPT */}\n      <div className=\"relative md:absolute md:left-16 md:top-[10%] z-30 w-[90%] max-w-[400px] mt-24 md:mt-0 mx-auto md:mx-0 p-8 md:p-10 receipt text-[#3e2723] scale-100 md:scale-115 shadow-2xl\">\n        <div className=\"border-b border-dashed border-[#3e2723]/30 pb-4 md:pb-6 mb-4 md:mb-6 text-center\">\n          <p className=\"font-bold tracking-widest text-base md:text-lg uppercase text-[#3e2723]\">Coffee Receipt</p>\n          <p className=\"text-xs md:text-sm opacity-60 mt-1\">{new Date().toLocaleTimeString()} - Order #88</p>\n        </div>\n        <p\n          className=\"text-xl md:text-2xl leading-relaxed italic font-medium overflow-hidden text-[#3e2723]\"\n          style={{\n            maxHeight: \"320px\",\n            display: \"-webkit-box\",\n            WebkitLineClamp: 8,\n            WebkitBoxOrient: \"vertical\"\n          }}\n        >\n          {summarizeForReceipt(currentResponse)}\n        </p>\n        <div className=\"mt-8 md:mt-12 pt-6 border-t border-dashed border-[#3e2723]/30 text-center\">\n          <p className=\"text-sm md:text-base opacity-50 uppercase tracking-tighter\">Thank You for Visiting! ‚òï</p>\n        </div>\n      </div>\n\n      {/* BACK BUTTON */}\n      <button\n        onClick={handleBackToShop}\n        className=\"fixed md:absolute top-6 md:top-10 left-6 md:left-auto md:right-10 z-50 bg-[#4a322d] text-[#fffcf0] \n                   px-8 md:px-14 py-4 md:py-6 rounded-full text-xl md:text-2xl font-bold shadow-2xl hover:scale-105 transition-all active:scale-95 border-2 border-white/20\"\n      >\n        <span>‚Üê Order something else</span>\n      </button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}